{
  "hash": "59de665b3347b1be9a6bd87d45b86b5a",
  "result": {
    "markdown": "---\ntitle: \"Setup\"\nengine: knitr\n---\n\n\n## Material\n\n\n{{< downloadthis ../assets/pdf/01_introduction.pdf dname=\"01_introduction\" label=\"Download the presentation\" icon=\"filetype-pdf\" >}}\n\n\n\n## Exercises\n\n### Login and set up\n\nChoose one of the following:\n\n- **Enrolled:** if you are enrolled in a course with a teacher\n- **Own installation:** if you want to install packages on your own local Rstudio installation\n- **Docker:** if you want to use the docker image locally\n- **renkulab.io** if you want to easily  deploy the environment outside the course\n\n::: {.panel-tabset}\n\n## Enrolled\n\nLog in to Rstudio server with the provided link, username and password.\n\n## Own installation\n\nInstall the required packages using the script [`install_packages.R`](https://raw.githubusercontent.com/sib-swiss/single-cell-training/master/Docker/install_packages.R)\n\n## Docker\n\nWith docker, you can use exactly the same environment as we use in the enrolled course, but than running locally.\n\nIn the video below there's a short tutorial on how to set up a docker container for this course. Note that you will need administrator rights, and that if you are using Windows, you need the latest version of Windows 10.\n\n\n{{< video https://vimeo.com/481620477 width=\"640\" height=\"360\" >}}\n\n\n\nThe command to run the environment required for this course looks like this (in a terminal):\n\n::: {.callout-warning}\n## Modify the script\nThe home directory within the container is mounted to your current directory (`$PWD`), if you want to change this behaviour, modify the path after `-v` to the working directory on your computer before running it.\n:::\n\n\n::: {.cell hash='day1-1_setup_cache/html/unnamed-chunk-1_1c4b876c04ce695c706f5917064dfe4c'}\n\n```{.bash .cell-code}\ndocker run \\\n--rm \\\n-p 8787:8787 \\\n-e PASSWORD=test \\\n-v $PWD:/home/rstudio \\\ngeertvangeest/single-cell-rstudio:latest\n```\n:::\n\n\nIf this command has run successfully, approach Rstudio server like this:\n\n```\nhttp://localhost:8787\n```\n\nCopy this URL into your browser. If you used the snippet above, the credentials will be:\n\n- **Username:** `rstudio`\n- **Password:** `test`\n\nGreat! Now you will be able to use Rstudio with all required installations.\n\n::: {.callout-note}\n## About the options\nThe option `-v` mounts a local directory in your computer to the directory `/home/rstudio` in the docker container ('rstudio' is the default user for Rstudio containers). In that way, you have files available both in the container and on your computer. Use this directory on your computer. Change the first path to a path on your computer that you want to use as a working directory.\n\nThe part `geertvangeest/single-cell-rstudio:latest` is the image we are going to load into the container. The image contains all the information about software and dependencies needed for this course. When you run this command for the first time it will download the image. Once it's on your computer, it will start immediately.\n:::\n\n## renkulab.io\nTo simply run the environment, you can use [renku](https://renkulab.io). You can find the repository (including the image) here: [https://renkulab.io/projects/geert.vangeest/single-cell-training/](https://renkulab.io/projects/geert.vangeest/single-cell-training/). \n\n:::\n\n### Create a project\n\nNow that you have access to an environment with the required installations, we will set up a project in a new directory. On the top right choose the button **Project (None)** and select **New Project...**\n\n![](../assets/images/create_new_project.png){width=200}\n\nContinue by choosing **New Directory**\n\n![](../assets/images/choose_new_directory.png){width=300}\n\nAs project type select **New Project**\n\n![](../assets/images/choose_new_project.png){width=300}\n\nFinally, type in the project name. This should be `single_cell_course`. Finish by clicking **Create Project**.\n\n![](../assets/images/define_directory_name.png){width=300}\n\nNow that we have setup a project and a project directory (it is in `/home/rstudio/single_cell_course`), we can download the data that is required for this course. We will use the built-in terminal of Rstudio. To do this, select the **Terminal** tab:\n\n![](../assets/images/select_terminal_tab.png){width=300}\n\n### Downloading the course data\n\nTo download and extract the dataset, copy-paste these commands inside the terminal tab:\n\n\n::: {.cell hash='day1-1_setup_cache/html/unnamed-chunk-2_93ed9f534c0bbee569e55b34a716c0fb'}\n\n```{.bash .cell-code}\nwget https://single-cell-transcriptomics.s3.eu-central-1.amazonaws.com/course_data.tar.gz\ntar -xvf course_data.tar.gz\nrm course_data.tar.gz\n```\n:::\n\n\n::: {.callout-note}\n## If on Windows\n\nIf you're using Windows, you can directly open the [link](https://single-cell-transcriptomics.s3.eu-central-1.amazonaws.com/course_data.tar.gz) in your browser, and downloading will start automatically. Unpack the tar.gz file in the directory where you want to work in during the course.\n::: \n\nHave a look at the data directory you have downloaded. It should contain the following:\n\n```\ncourse_data\n├── count_matrices\n│   ├── ETV6-RUNX1_1\n│   │   └── outs\n│   │       └── filtered_feature_bc_matrix\n│   │           ├── barcodes.tsv.gz\n│   │           ├── features.tsv.gz\n│   │           └── matrix.mtx.gz\n│   ├── ETV6-RUNX1_2\n│   │   └── outs\n│   │       └── filtered_feature_bc_matrix\n│   │           ├── barcodes.tsv.gz\n│   │           ├── features.tsv.gz\n│   │           └── matrix.mtx.gz\n│   ├── ETV6-RUNX1_3\n│   │   └── outs\n│   │       └── filtered_feature_bc_matrix\n│   │           ├── barcodes.tsv.gz\n│   │           ├── features.tsv.gz\n│   │           └── matrix.mtx.gz\n│   ├── PBMMC_1\n│   │   └── outs\n│   │       └── filtered_feature_bc_matrix\n│   │           ├── barcodes.tsv.gz\n│   │           ├── features.tsv.gz\n│   │           └── matrix.mtx.gz\n│   ├── PBMMC_2\n│   │   └── outs\n│   │       └── filtered_feature_bc_matrix\n│   │           ├── barcodes.tsv.gz\n│   │           ├── features.tsv.gz\n│   │           └── matrix.mtx.gz\n│   └── PBMMC_3\n│       └── outs\n│           └── filtered_feature_bc_matrix\n│               ├── barcodes.tsv.gz\n│               ├── features.tsv.gz\n│               └── matrix.mtx.gz\n└── reads\n    ├── ETV6-RUNX1_1_S1_L001_I1_001.fastq.gz\n    ├── ETV6-RUNX1_1_S1_L001_R1_001.fastq.gz\n    └── ETV6-RUNX1_1_S1_L001_R2_001.fastq.gz\n\n20 directories, 21 files\n```\n\nThis data comes from:\n\nCaron M, St-Onge P, Sontag T, Wang YC, Richer C, Ragoussis I, et al. **Single-cell analysis of childhood leukemia reveals a link between developmental states and ribosomal protein expression as a source of intra-individual heterogeneity.** Scientific Reports. 2020;10:1–12. Available from: http://dx.doi.org/10.1038/s41598-020-64929-x\n\nWe will use the reads to showcase the use of `cellranger count`. The directory contains only reads from chromosome 21 and 22 of one sample (`ETV6-RUNX1_1`). The count matrices are output of `cellranger count`, and we will use those for the other exercises in `R`.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}